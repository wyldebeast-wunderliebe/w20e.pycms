<metal:define-macro define-macro="master"
      metal:extend-macro="main.macros['master']">

<html xmlns="http://www.w3.org/1999/xhtml" 
      xml:lang="en" 
      xmlns:tal="http://xml.zope.org/namespaces/tal">

  <head>
    <metal:fill-slot fill-slot="css_slot">
      <link rel="stylesheet" href="${request.application_url}/manage.css"
            type="text/css" media="screen" charset="utf-8" />
      <metal:define-slot define-slot="extra_css_slot">
    </metal:fill-slot>
    <metal:fill-slot fill-slot="js_slot">
      <script language="JavaScript"
              src="${request.application_url}/manage.js"></script>
      <metal:define-slot define-slot="extra_js_slot">
    </metal:fill-slot>
  </head>

  <body metal:fill-slot="body">

    <!-- === lightbox stuff === -->
    <div id="lbpanel">
    </div>

    <div id="lb">
      <div id="lbmsg"></div>
    </div>

    <div id="msg"></div>
    <!-- === end lightbox stuff === -->

    <div id="editbar" class="reversed">
      <a href="#" tal:attributes="href '%s' % view.base_url">View</a>
    </div>

    <!-- === BEGIN: perspectives === -->
    <ul class="tabs" id="page-perspectives" 
        metal:define-macro="perspectives">
      <tal:repeat repeat="perspective view.perspectives">
        
        <li class="tab"
            tal:define="tab_active view.viewname == perspective.name"
            tal:attributes="class 'tab %s' % (tab_active and 'selected' or '')"
            >
          <a href="#" tal:attributes="href perspective.target;
                                      class '%s' % (tab_active and 'active' or '')" 
             tal:content="perspective.name"
             >Content</a>
        </li>
      </tal:repeat>
  
    </ul>    
    <!-- === END: perspectives === -->


    <!-- === BEGIN: content_toolbar === -->
    <div id="toolbar" metal:define-macro="content_toolbar" metal:define-slot="toolbar">

      <tal:repeat repeat="action view.contentactions">
        <div class="action" id="${action.name}" title="${action.name}">
          <a href="#" tal:attributes="href action.target">${action.name}</a>
        </div>
      </tal:repeat>
      
      <tal:condition condition="view.allowed_content_types">
        <div class="action" id="add" title="add"
             tal:condition="view.user_has_permission('admin')"
             >
          <a href="#"
             tal:attributes="href 'javascript: pycms.showSubmenu(\'sub_add\')'"
             >Add...</a>
          <div id="sub_add" class="actionsubs">
            <tal:repeat repeat="subaction view.allowed_content_types">
              <div class="subaction" id="id" title="title"
                   tal:attributes="id subaction; title subaction"
                   >
                <a href="#" tal:content="subaction"
                   tal:attributes="href '%sadd?ctype=%s' % (view.base_url, subaction)"
                   >Add something</a>
              </div>
            </tal:repeat>
          </div>
        </div>
      </tal:condition>
        
      <div class="globalactions">
        <tal:repeat repeat="action view.siteactions">
          <div class="action" id="" title=""
               tal:attributes="id action.name; title action.name"
               tal:condition="action.condition"
               >
            <a href="#" tal:attributes="href action.target"
               tal:content="action.name"
               >Title</a>
          </div>
        </tal:repeat>
      </div>
    </div>
    <!-- END content_toolbar -->

    <div id="main" class="container" metal:define-slot="main">

      <div id="wrapper" class="sixteen columns">

        <div id="content" metal:define-slot="content"/>
      
        <div id="footer" metal:define-slot="footer">
          <tal:footer replace="structure view.footer"/>
        </div>
      </div>

    </div>

  </body>
</html>

</metal:define-macro>
